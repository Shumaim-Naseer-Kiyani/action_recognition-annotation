<!DOCTYPE html>
<html>
<head>
    <title>Action Recognition System</title>
    <style>
        body { font-family: sans-serif; text-align: center; background: #f4f4f4; }
        .container { background: white; width: 400px; margin: 50px auto; padding: 20px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        #preview { width: 100%; margin: 10px 0; display: none; border-radius: 5px; }
        .result-box { margin-top: 20px; padding: 10px; background: #e7f3ff; border-radius: 5px; display: none; }
        button { background: #007bff; color: white; border: none; padding: 10px 20px; cursor: pointer; border-radius: 5px; }
    </style>
</head>
<body>
    <div class="container">
        <h2>Action & Image Annotator</h2>
        <input type="file" id="imageInput" accept="image/*" onchange="previewImage()">
        <img id="preview">
        <br>
        <button onclick="uploadImage()">Analyze Action</button>

        <div id="resultBox" class="result-box">
            <p><strong>Recognized Action:</strong> <span id="action"></span></p>
            <p><strong>Annotation:</strong> <span id="annotation"></span></p>
        </div>
    </div>

    <script>
        // PASTE YOUR NGROK URL HERE
        const API_URL = "https://truculently-unnarrow-rigoberto.ngrok-free.dev/predict";

        function previewImage() {
            const file = document.getElementById('imageInput').files[0];
            const preview = document.getElementById('preview');
            preview.src = URL.createObjectURL(file);
            preview.style.display = 'block';
        }

        async function uploadImage() {
            const fileInput = document.getElementById('imageInput');
            if (fileInput.files.length === 0) return alert("Please select an image");

            const formData = new FormData();
            formData.append('image', fileInput.files[0]);

            document.getElementById('annotation').innerText = "Analyzing...";
            document.getElementById('resultBox').style.display = 'block';

            const response = await fetch(API_URL, { method: 'POST', body: formData });
            const data = await response.json();

            document.getElementById('action').innerText = data.action;
            document.getElementById('annotation').innerText = data.annotation;
        }
    </script>
</body>
</html>